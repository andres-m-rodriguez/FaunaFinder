@inject IAppLocalizer L

<MudExpansionPanel Expanded="@IsExpanded"
                   ExpandedChanged="@OnExpandedChanged"
                   Class="mb-2">
    <TitleContent>
        <div class="d-flex flex-column flex-sm-row align-start align-sm-center justify-space-between" style="width: 100%;">
            <div class="d-flex flex-column flex-sm-row align-start align-sm-center">
                <MudText Typo="@TitleTypo" Color="Color.Primary" Class="@(ShowViewDetails ? "mr-4" : "")">
                    @L.GetLocalizedValue(Species.CommonName)
                </MudText>
                <MudText Typo="Typo.caption" Color="Color.Secondary">
                    <em>@Species.ScientificName</em>
                </MudText>
            </div>
            @if (ShowViewDetails && OnViewDetails.HasDelegate)
            {
                <div @onclick:stopPropagation="true">
                    <MudButton Variant="Variant.Text"
                               Color="Color.Primary"
                               Size="Size.Small"
                               EndIcon="@Icons.Material.Filled.OpenInNew"
                               OnClick="OnViewDetails">
                        @L["ViewDetails"]
                    </MudButton>
                </div>
            }
        </div>
    </TitleContent>
    <ChildContent>
        <ConservationLinksList Links="Species.FwsLinks"
                               UseGrid="UseGridLayout"
                               ShowEmptyMessage="ShowEmptyMessage" />
    </ChildContent>
</MudExpansionPanel>

@code {
    [CascadingParameter(Name = "LanguageRefresh")]
    private int LanguageRefresh { get; set; }

    [Parameter, EditorRequired]
    public SpeciesForListDto Species { get; set; } = null!;

    [Parameter]
    public bool IsExpanded { get; set; }

    [Parameter]
    public EventCallback<bool> OnExpandedChanged { get; set; }

    [Parameter]
    public bool ShowViewDetails { get; set; }

    [Parameter]
    public EventCallback OnViewDetails { get; set; }

    [Parameter]
    public bool UseGridLayout { get; set; }

    [Parameter]
    public bool ShowEmptyMessage { get; set; }

    [Parameter]
    public Typo TitleTypo { get; set; } = Typo.subtitle2;
}
